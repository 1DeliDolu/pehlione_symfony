{% extends 'admin/_layout.html.twig' %}

{% block title %}Addresses - Admin{% endblock %}

{% block admin_content %}
	<div>
		<div>
			<div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
				<div>
					<h1 class="text-2xl font-semibold">Addresses</h1>
					<p class="mt-1 text-sm text-gray-600">Manage user addresses</p>
				</div>

				<a href="{{ path('admin_address_new') }}" class="inline-flex items-center justify-center rounded-xl bg-black px-4 py-2.5 text-sm font-medium text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2">
					+ New Address
				</a>
			</div>

			{% if addresses %}
				<div class="mt-6 rounded-2xl border bg-white overflow-hidden">
					<div class="overflow-x-auto">
						<table class="min-w-full text-sm">
								<thead class="bg-gray-50 text-gray-600">
									<tr>
										<th class="px-5 py-3 text-left font-medium">Name</th>
										<th class="px-5 py-3 text-left font-medium">Street</th>
										<th class="px-5 py-3 text-left font-medium">City</th>
										<th class="px-5 py-3 text-left font-medium">User</th>
										<th class="px-5 py-3 text-right font-medium">Actions</th>
									</tr>
								</thead>
								<tbody class="divide-y">
									{% for address in addresses %}
										<tr>
											<td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">{{ address.user.firstname ?? 'N/A' }}
												{{ address.user.lastname ?? 'N/A' }}</td>
											<td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">{{ address.strasse }}
												{{ address.hausnummer }}</td>
											<td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">{{ address.city }}</td>
											<td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">{{ address.user.email }}</td>
											<td class="relative whitespace-nowrap px-3 py-4 text-sm font-medium space-x-2">
												<a href="{{ path('admin_address_show', {'id': address.id}) }}" class="text-indigo-600 hover:text-indigo-900">View</a>
												<a href="{{ path('admin_address_edit', {'id': address.id}) }}" class="text-indigo-600 hover:text-indigo-900">Edit</a>
												<form method="post" action="{{ path('admin_address_delete', {'id': address.id}) }}" style="display:inline;" onsubmit="return confirm('Are you sure?');">
													<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ address.id) }}">
													<button class="text-red-600 hover:text-red-900 border-0 bg-none cursor-pointer" type="submit">Delete</button>
												</form>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			{% else %}
				<div class="mt-8 text-center py-12">
					<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21H5a2 2 0 01-2-2V5a2 2 0 012-2h11l5 5v11a2 2 0 01-2 2z"></path>
					</svg>
					<h3 class="mt-2 text-sm font-medium text-gray-900">No addresses</h3>
					<p class="mt-1 text-sm text-gray-500">Get started by creating a new address.</p>
					<div class="mt-6">
						<a href="{{ path('admin_address_new') }}" class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700">
							+ New Address
						</a>
					</div>
				</div>
			{% endif %}
		</div>
	</div>
{% endblock %}
